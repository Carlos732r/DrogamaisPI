<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Tela de Cadastro - Droga +</title>
    
    <link rel="icon" type="image/x-icon" href="assets/logo.png" />
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="css/styles.css" rel="stylesheet" />
    <script href="/js/scripts.js"></script>
    <style>
       body {
           background-color: #f8f9fa;
       }
       .divider {
           display: flex;
           align-items: center;
           text-align: center;
       }
       .divider::before,
       .divider::after {
           content: "";
           flex: 1;
           height: 1px;
           background: #eee;
       }
       .card {
           border: none;
           box-shadow: 0 4px 8px rgba(0,0,0,0.1);
       }
       .btn-danger-custom {
           background-color: #b21f2d;
           border-color: #b21f2d;
       }
       .btn-danger-custom:hover,
       .btn-danger-custom:focus {
           background-color: #9c1f2d;
           border-color: #9c1f2d;
       }
       
       /* CSS required for the new menu's search bar */
       .search-form {
           flex-grow: 1;
           max-width: 500px;
           margin: 0 1rem;
       }
       .search-input {
           border-radius: 25px !important;
           border: 2px solid #e0e0e0;
           padding: 8px 20px;
           font-size: 16px;
           width: 100%;
           transition: all 0.3s ease;
       }
       .search-input:focus {
           border-color: #007bff;
           box-shadow: 0 4px 12px rgba(0,123,255,0.2);
           outline: none;
       }
       .search-input::placeholder {
           color: #999;
           font-weight: 400;
       }
       @media (max-width: 991px) {
           .search-form {
               order: 3;
               margin: 1rem 0 0.5rem 0;
               width: 100%;
           }
       }
		.btnExcluir {
			cursor: pointer;
		}
		.tab{
			border: 1px solid black;
			width: 60%;
		}
		.coluna{
			border: 1px solid black;
		}
		.btnExcluir
		{
			display: flex;              
			justify-content: center;        
		}
		
		/* Validação visual */
		.is-valid {
			border-color: #198754 !important;
			background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
			background-repeat: no-repeat;
			background-position: right calc(0.375em + 0.1875rem) center;
			background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
		}
		
		.is-invalid {
			border-color: #dc3545 !important;
			background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
			background-repeat: no-repeat;
			background-position: right calc(0.375em + 0.1875rem) center;
			background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
		}

    </style>
</head>

<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container px-4 px-lg-5">
          <img src="assets/logo.png" alt="Company Logo" height="50">
          <a class="navbar-brand" href="index.html">Droga +</a>
          
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
          
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                     <li class="nav-item"><a class="nav-link" href="index.html">Início</a></li>
                <li class="nav-item"><a class="nav-link" href="login.html">Entrar/Cadastrar</a></li>
                  <li class="nav-item"><a class="nav-link" href="contato.html">Contate-nos</a></li>
              </ul>

              <form class="d-flex search-form" role="search">
                  <input class="form-control search-input" type="search" placeholder="O que deseja procurar?" aria-label="Search">
              </form>
              
              <form class="d-flex">
                  <a href="carrinho.html" class="btn btn-outline-dark">
                      <i class="bi bi-cart-fill me-1"></i> Carrinho
                      <span class="badge bg-dark text-white ms-1 rounded-pill">0</span>
                  </a>
              </form>
          </div>
      </div>
  </nav>
  <section>
    <div class="container py-5">
      <div class="row d-flex justify-content-center">
            <div class="card p-4">
                  <div class="card-body">
                    <h2 class="fw-bold mb-4 text-center"><i class="fas fa-user me-2"></i>Cadastro de Fornecedor</h2>
                <form class="row g-3 needs-validation">
                <div class="col-md-4">
                    <label for="nomefantasia" class="form-label">Nome Fantasia</label>
                    <input type="text" class="form-control" id="nomefantasia" name="nomefantasia" placeholder="Nome Fantasia" required>
                <div class="invalid-feedback">
                    Entre com o nome fantasia.
                </div>
                </div>
                <div class="col-md-4">
                    <label for="razaosocial" class="form-label">Razão Social</label>
                    <input type="text" class="form-control" id="razaosocial" name="razaosocial" placeholder="Razão Social" required>
                <div class="invalid-feedback">
                    Entre com a razão social.
                </div>
                </div>
                <div class="col-md-4">
                    <label for="CNPJ" class="form-label">CNPJ</label>
                    <div class="input-group has-validation">
                    <input type="text" class="form-control" id="CNPJ" name="CNPJ" placeholder="00.000.000/0000-00" maxlength="18" required>
                    <div class="invalid-feedback">
                        Entre com um CNPJ válido
                    </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="inscricao" class="form-label">Inscrição Estadual</label>
                    <input type="text" class="form-control" id="inscricao" name="inscricao" placeholder="Inscrição Estadual" required>
                    <div class="invalid-feedback">
                    Entre com uma inscrição estadual valida
                    </div>
                </div>
                <div class="col-md-3">
                      <label for="segmento" class="form-label">Segmento</label>
                      <select class="form-select" id="segmento" name="segmento" required>
                          <option>Distribuidora</option>
                          <option>Laboratório</option>
                          <option>Farmoquímico</option>
                          <option>Outros</option>
                      </select>
                    <div class="invalid-feedback">
                    Selecione o seguimento correto.
                    </div>
                </div>
                <div class="col-md-3">
                    <label for="CEP" class="form-label">CEP</label>
                    <input type="text" id="CEP" name="CEP" class="form-control" placeholder="00000-000" maxlength="9" required>
                    <div class="invalid-feedback">
                    Entre com um CEP válido.
                    </div>
                </div>
                    <div class="col-md-5">
                        <label for="logradouro" class="form-label">Logradouro</label>
                        <input type="text" id="logradouro" name="logradouro" class="form-control" placeholder="Logradouro" required>
                        <div class="invalid-feedback">
                            Entre com um logradouro valido.
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label for="numero" class="form-label">Número</label>
                        <input type="text" id="numero" name="numero" class="form-control" placeholder="Numero" required>
                        <div class="invalid-feedback">
                            Entre com um Numero valido.
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label for="complemento" class="form-label">Complemento</label>
                        <input type="text" id="complemento" name="complemento" class="form-control" placeholder="Complemento" >
                        <div class="invalid-feedback">
                            Entre com um Complemento valido.
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label for="bairro" class="form-label">Bairro</label>
                        <input type="text" id="bairro" name="bairro" class="form-control" placeholder="Bairro"required>
                        <div class="invalid-feedback">
                            Entre com um Bairro valido.
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label for="cidade" class="form-label">Cidade</label>
                        <input type="text" id="cidade" name="cidade" class="form-control" placeholder="Cidade" required>
                        <div class="invalid-feedback">
                            Entre com uma cidade valido.
                        </div>
                    </div>
                        <div class="col-md-4">
                        <label for="UF" class="form-label">Estado (UF)</label>
                            <select class="form-select" id="UF" name="UF" required>
                                <option value="">Selecione o estado...</option>
                                <option value="AC">Acre (AC)</option>
                                <option value="AL">Alagoas (AL)</option>
                                <option value="AP">Amapá (AP)</option>
                                <option value="AM">Amazonas (AM)</option>
                                <option value="BA">Bahia (BA)</option>
                                <option value="CE">Ceará (CE)</option>
                                <option value="DF">Distrito Federal (DF)</option>
                                <option value="ES">Espírito Santo (ES)</option>
                                <option value="GO">Goiás (GO)</option>
                                <option value="MA">Maranhão (MA)</option>
                                <option value="MT">Mato Grosso (MT)</option>
                                <option value="MS">Mato Grosso do Sul (MS)</option>
                                <option value="MG">Minas Gerais (MG)</option>
                                <option value="PA">Pará (PA)</option>
                                <option value="PB">Paraíba (PB)</option>
                                <option value="PR">Paraná (PR)</option>
                                <option value="PE">Pernambuco (PE)</option>
                                <option value="PI">Piauí (PI)</option>
                                <option value="RJ">Rio de Janeiro (RJ)</option>
                                <option value="RN">Rio Grande do Norte (RN)</option>
                                <option value="RS">Rio Grande do Sul (RS)</option>
                                <option value="RO">Rondônia (RO)</option>
                                <option value="RR">Roraima (RR)</option>
                                <option value="SC">Santa Catarina (SC)</option>
                                <option value="SP">São Paulo (SP)</option>
                                <option value="SE">Sergipe (SE)</option>
                                <option value="TO">Tocantins (TO)</option>
                            </select>
                    </div>
                <div class="col-md-4">
                    <label for="responsavel" class="form-label">Responsavel</label>
                    <input type="text" class="form-control" id="responsavel" name="responsavel" placeholder="Responsavel" required>
                    <div class="invalid-feedback">
                        Entre com o nome do responsavel valido.
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="telefone" class="form-label">Telefone</label>
                    <input type="text" class="form-control" id="telefone" name="telefone" placeholder="(99) 99999-9999" onkeypress="mTel(this)" maxlength="13" required>
                <div class="invalid-feedback">
                    Entre com um telefone valido.
                </div>
                </div>
                <div class="col-md-4">
                    <label for="email" class="form-label">E-mail</label>
                    <div class="input-group has-validation">
                    <input type="email" class="form-control" id="email" name="email" placeholder="E-mail" aria-describedby="inputGroupPrepend" required>
                    <div class="invalid-feedback">
                        Com um email valido.
                    </div>
                    </div>
                </div>

                </div>
                <div class="col-12">
                    <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                        Aceito termos e condições
                    </label>
                    <div class="invalid-feedback">
                        Aceite os termos para continuar
                    </div>
                    </div>
                </div>
                <div class="col-12" >
                    <button class="btn btn-primary" onclick="adicionaritem()" type="button">Cadastrar</button>
                </div>
                </form>
            </div> 
        </div>
      </div>
    </div>
  </section>
      <div class="container py-5">
      <div class="row d-flex justify-content-center">
            <div class="card p-4">
                  <div class="card-body">
                    <table class="table table-light table-hover">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="ckTodos" onchange="selecionartodos()"></th>
                                <th>Nome Fantasia</th>
                                <th>CNPJ</th>
                                <th>CEP</th>
                                <th>Logradouro</th>
                                <th>Número</th>
                                <th>Bairro</th>
                                <th>Cidade</th>
                                <th>Estado</th>
                                <th>Responsável</th>
                                <th>Telefone</th>
                                <th>E-mail</th>
                                <th>Ação</th>
                            </tr>
                        </thead>

                        <tbody id="tb-body"></tbody>
                    </table>

                    <div>
                        <button class="btn btn-danger" id="btnExcluirSelecionados">Excluir Selecionados</button>
                    </div>
                  </div>
            </div>
      </div>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>
    
    <script>
        // Validação de CNPJ
        function validarCNPJ(cnpj) {
            cnpj = cnpj.replace(/[^\d]+/g, '');
            
            if (cnpj.length !== 14) return false;
            
            if (/^(\d)\1+$/.test(cnpj)) return false;
            
            let tamanho = cnpj.length - 2;
            let numeros = cnpj.substring(0, tamanho);
            let digitos = cnpj.substring(tamanho);
            let soma = 0;
            let pos = tamanho - 7;
            
            for (let i = tamanho; i >= 1; i--) {
                soma += numeros.charAt(tamanho - i) * pos--;
                if (pos < 2) pos = 9;
            }
            
            let resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
            if (resultado != digitos.charAt(0)) return false;
            
            tamanho = tamanho + 1;
            numeros = cnpj.substring(0, tamanho);
            soma = 0;
            pos = tamanho - 7;
            
            for (let i = tamanho; i >= 1; i--) {
                soma += numeros.charAt(tamanho - i) * pos--;
                if (pos < 2) pos = 9;
            }
            
            resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
            if (resultado != digitos.charAt(1)) return false;
            
            return true;
        }
        
        // Validação de CEP
        function validarCEP(cep) {
            cep = cep.replace(/[^\d]+/g, '');
            return cep.length === 8;
        }
        
        // Máscara de CNPJ
        function mascaraCNPJ(valor) {
            valor = valor.replace(/\D/g, '');
            valor = valor.replace(/^(\d{2})(\d)/, '$1.$2');
            valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
            valor = valor.replace(/\.(\d{3})(\d)/, '.$1/$2');
            valor = valor.replace(/(\d{4})(\d)/, '$1-$2');
            return valor;
        }
        
        // Máscara de CEP
        function mascaraCEP(valor) {
            valor = valor.replace(/\D/g, '');
            valor = valor.replace(/^(\d{5})(\d)/, '$1-$2');
            return valor;
        }
        
        // Aplicar validações
        document.addEventListener('DOMContentLoaded', function() {
            const cnpjInput = document.getElementById('CNPJ');
            const cepInput = document.getElementById('CEP');
            
            // Validação de CNPJ
            cnpjInput.addEventListener('input', function(e) {
                let valor = e.target.value;
                e.target.value = mascaraCNPJ(valor);
                
                const cnpjLimpo = valor.replace(/[^\d]+/g, '');
                
                if (cnpjLimpo.length === 14) {
                    if (validarCNPJ(valor)) {
                        e.target.classList.remove('is-invalid');
                        e.target.classList.add('is-valid');
                    } else {
                        e.target.classList.remove('is-valid');
                        e.target.classList.add('is-invalid');
                    }
                } else {
                    e.target.classList.remove('is-valid');
                    e.target.classList.remove('is-invalid');
                }
            });
            
            // Validação de CEP
            cepInput.addEventListener('input', function(e) {
                let valor = e.target.value;
                e.target.value = mascaraCEP(valor);
                
                const cepLimpo = valor.replace(/[^\d]+/g, '');
                
                if (cepLimpo.length === 8) {
                    if (validarCEP(valor)) {
                        e.target.classList.remove('is-invalid');
                        e.target.classList.add('is-valid');
                    } else {
                        e.target.classList.remove('is-valid');
                        e.target.classList.add('is-invalid');
                    }
                } else {
                    e.target.classList.remove('is-valid');
                    e.target.classList.remove('is-invalid');
                }
            });
        });
    </script>
</body>
</html>